~~客户您好！
作为本项目的具体负责人，我已经仔细阅读了您所提供的功能需求，并对相关界面进行了分析。目前项目已进入编码阶段。为了保证您能拿到一个优秀的产品，我们需要进行更加充分的沟通，在此期间我将多次通过文档的形式与您沟通项目情况，请您`仔细阅读，及时反馈`。项目的具体功能，只会以双方已经达成共识文档为准，为此给您带来的麻烦请多多谅解！

文档通常包括：需求文档，系统设计文档，测试文档及开发进度安排，形式并不重要，其目的是客户及开发人员之间的充分沟通。

文档是程序员花费大量时间总结分析而来，书写文档让我们更好的思考，思考让我们更快的发现问题。同时文档也是您购买的服务中的一部分，最终整理后将全部交付给您。

# 项目分析

项目主体是一个多用户的博客系统，其不同之处在于用户能够在系统中设立任务（立flag)，例如：每月必须写3-5篇文章，而设立任务的同时还需设置一定的保证金，一旦任务失败，该保证金将不退回。此项目的在于督促用户主动学习，积极写文章，提升自己的学习能力和写作能力。为了让我们对即将开发的项目有更深入的理解，我将从以下三种元素入手：

1. 角色
2. 信息
3. 动作

接下来做单独分解。

## 1.角色

在项目里会出现以下角色：

* 游客——没有登录的用户
* 用户——使用微信注册，可以进行文章发布、立flag
* 管理员——辅助站长做内容管理
* 站长——权限最高的用户角色，有
* 时也叫超级管理员

## 2.信息结构

主要信息有：

* 用户 User——所有内容都围绕用户来进行
* 文章 Article——项目的核心数据，由用户发布，其他用户可以点赞
* 分类 Category——文章分类
* 任务 Flag——用户自己立下的任务
* 消息通知 Notice——间断给用户推送Flag进度


## 3.动作

角色和信息之间的互动称为动作，主要有以下几种：

* 用户注册
* 用户立Flag
* 管理员审核(因为涉及到交保证金，要审核)
* 用户发表文章
* 其他用户点赞
* Flag完成，管理员审核退保证金

## 用例

角色主要用例：

### 1.游客

* 游客可以创建用户（仅游客可用）
* 游客可以查看文章列表
* 游客可以根据分类筛选文章
* 游客可以根据发布时间和点赞数对文章进行排序
* 游客可以查看文章详情

### 2.用户

* 用户可以创建Flag(不能编辑)
* 用户可以编辑Flag（编辑后需要重新审核)
* 用户可以查看个人Flag进度
* 用户可以发表文章
* 用户可以编辑文章
* 用户可以给他人文章点赞
* 用户可以查看个人信息界面
* 用户可以对昵称、头像、性别、手机号、进行修改
* 用户可以查看消息通知

### 3.管理员

* 管理员可以访问后台
* 管理员可以查看Flag记录
* 管理员可以为文章增加`推荐`属性

### 4.站长

* 站长可以编辑用户
* 站长可以修改站点设置
* 站长可以管理[^1]分类
* 站长可以管理文章
* 站长可以管理Flag
* 战场可以查看数据统计

## 流程

在项目制作过程中流程往往容易存在信息不对称的情况，我们对以下几个比较有争议的流程进行分析：


### 1. Flag流程

Flag总共有以下状态：

1. 待审核——等待管理员审核
2. 审核拒绝——
3. 审核通过——管理员审核通过
4. 待交保证金——等待管理员与用户线下沟通
5. Flag提交通过——全部审核完成，等待Flag开始时间
6. 进行中——Flag开始时间到，用户发表文章
7. 已完成——Flag结束时间之前，合格文章数达到预期
8. 已失败———Flag结束时间之前，合格文章数没有达到预期
9. 已取消——待交保证金之前可取消
10. 已失效——长期未处理（未交保证金） 

我们将按照以下流程进行开发：

`TODO 流程图`

### 2. 消息通知

消息通知的方式包括以下两种：
* 短信通知
* 站内通知（非推送）

### 3. Flag审核流程

* 用户选好填好Flag信息后提交审核
* 管理员接收到提交后，查看Flag内容是否合理，例如保证金额，时间长短等。决定是否审核通过。
* 审核通过后，系统发送通知给用户提醒其缴纳保证金
* 系统收到保证金后管理员第二次审核通过
* 系统根据Flag设立的开始时间开始统计合格文章

### 4. 打款流程

* 提交Flag审核时交保证金，在最好能对接微信，参照laravel教程购买流程
* Flag完成后，系统提醒管理员线下打款，截图上传保留


## 细节

有一些细节虽然看起来很小，但是随着项目的推进，修改难度会大大增加，我们对以下几个比较有争议的细节进行分析：

1. Flag交保证金对接微信的话，那么用户注册必须以微信形式
2. Flag设置可分为一周几篇，一个月几篇，一个时间段几篇
3. Flag都有开始时间和结束时间，统计已开始时间为准而不是审核通过时间



[^1]:管理默认指具有增加、删除、修改、查询功能















~~